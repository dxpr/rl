services:
  rl.experiment_data_storage:
    class: Drupal\rl\Storage\ExperimentDataStorage
    arguments: ['@database']

  rl.ts_calculator:
    class: Drupal\rl\Service\ThompsonCalculator
    public: true

  rl.experiment_manager:
    class: Drupal\rl\Service\ExperimentManager
    arguments: ['@rl.experiment_data_storage', '@rl.ts_calculator', '@config.factory', '@database', '@logger.factory']

  rl.experiment_registry:
    class: Drupal\rl\Registry\ExperimentRegistry
    arguments: ['@database']

  rl.experiment_decorator_manager:
    class: Drupal\rl\Decorator\ExperimentDecoratorManager
    tags:
      - { name: service_collector, tag: rl_experiment_decorator, call: addDecorator }

  rl.cache_manager:
    class: Drupal\rl\Service\CacheManager
    arguments: ['@config.factory']

  rl.cache_response_subscriber:
    class: Drupal\rl\EventSubscriber\CacheResponseSubscriber
    tags:
      - { name: event_subscriber }
